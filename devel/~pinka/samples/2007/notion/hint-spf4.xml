<?xml version="1.0" encoding="Windows-1251"?>
<?xml-stylesheet type="text/xsl" href="xhtml.xsl"?>
<book>

<chapter id="quit"><title>Интерактивная отладка</title>
<p>Слово QUIT позволяет включить интерактивный режим
прямо в необходимом контексте — и проверить 
состояние стека, объектов, порядок поиска, выполнить вручную
оставшуюся часть слова.
Если целевым является дочерний поток (нить), — тогда
в основном потоке надо сделать -1 PAUSE и 
обеспечить запуск QUIT лишь в отлаживаемом потоке.
Бывает полезно включить QUIT прямо в процессе подключения
файла — для отладки в текущем (особо, если глубоком) порядке поиска, вместо того, чтобы потом
устанавливать его вручную.
</p>

</chapter>


<chapter id="scope"><title>Область видимости при EXPORT</title>
<p>Пример <pre>
MODULE: SomethingSupport

INCLUDE core-implementation.f \ provide A

EXPORT

: A action-before A action-after ;

: B some-actions A ;

;MODULE
</pre></p>
<p>Здесь перекрывается обычный принцип <i>локальности</i>: в слове B будет использованно
не только что определенное слово A, а ранее определенное из словаря SomethingSupport,
т.к. именно этот словарь первый в порядке поиска (то бишь, на вершине стека контекста).
</p>

<p>Ошибка: неверно полагать, что в новом определении будет использованно выше-определенное слово.</p>

</chapter>


<chapter id="heap"><title>Хип локален для потока</title>

<p>Функции работы с памятью (ALLOCATE, RESIZE, FREE)
обращаются к некоторому хипу (куче).
Но, у каждого потока свой хип; взять же блок памяти
у одного хипа, а отдать другому хипу — нельзя.
</p>

<p>Ошибка: выделить память в одном потоке, а освободить ее в другом.</p>

</chapter>


<chapter id="dll"><title>Относительные ссылки на DLL</title>

<p>Для подключения DLL используется системная функция LoadLibrary.
При разрешении имени она ищет файл по абсолютному пути,
относительно бинарника, или в системных каталогах Windows.
</p>

<p>Ошибка: расположенный в новом месте бинарник, 
а ссылки на dll таковы, что они доступны лишь из старого места.</p>

</chapter>


</book>
