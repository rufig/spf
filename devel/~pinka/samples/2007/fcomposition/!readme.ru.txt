\ Feb.2008 

Макет форт-системы. Цель: отработки композиции и сборки (раскрутки).


index.f -- сборка и запуск 32-битной макетной форт-системы.
    Система располагается в двух динамически выделенных блоках памяти
    (пространства кода и данных), использует еще три динамически выделенных
    блока под управляющий стек, стек контекста и буфер PAD; стек данных,
    стек возвратов и код слов форт-процессора берутся из инструментальной
    форт-системы.
    Подробней см. "!readme.ru.xml" (там же даны понятия и состав
    форт-процессора, кодогенератора, интерпретатора и транслятора).


spf4-64.test.f -- сборка 64-битного форт-процессора.
    Лексикон слов форт-процессора расположен в словаре emu64
    инструментальной системы и включает порядка 130 слов,
    из которых примитвы составляют два десятка, все остальные же
    слова определены на их базе (поэтому он и эмулятор).
    В силу того, что эти высокоуровневые определения содержат
    литералы и управление потоком исполнения
    (в том числе через стек возвратов), они должны компилироваться
    в 64-битный код. Поэтому, для их сборки в систему вначале загружается 
    переходной кодогенератор, порождающий 64-битный код,
    и использующий его транслятор (а именно, просто в новом контексте
    в отдельное пространство повторно подгружен набор правил ForthML).
    После этого, используя этот транслятор, загружаются высокоуровневые
    определения форт-процессора.
    

spf4-host64.f -- сборка и запуск 64-битного транслятора plainForth.
    Вначале в отдельный словарь инструментальной системы (а именно,
    в словарь emu64) собирается 64-битный форт-процессор. Далее, на эту
    базу загружается уже родной 64-битный кодогенератор и интерпретатор
    (реализация интерпретатора никак не завязана на размер ячейки,
    его надо лишь подключить поверх заданной базы). В конце подключается
    транслятор plainForth в виде простого интерпретирующего QUIT.
    После инициализации загруженного интепретатора в нем создается
    словарь FORTH-WL, в который и импортируются все слова из словаря emu64.
    Этот импорт делается затем, что загруженный интерпретатор ничего
    не знает о структуре словаря и контекста иструментальной системы
    и не использует их.
    Конечно, вместо подключения отдельного интерпретатора можно было бы сделать
    обертку к инструментальной системе, но ведь многоразовый интерпретатор-то
    давно готов, а одноразовую обертку надо еще делать, поэтому
    импортировать слова -- проще ;)
